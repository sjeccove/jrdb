!function(n){"use strict";function e(n){var e,t,r,o,i,l,a=arguments,c=a.length;for(e=1;c>e;e+=1)if(t=a[e])for(r=S(t),o=0,i=r.length;i>o;o+=1)l=r[o],n[l]=t[l];return n}function t(n){var e=this.N(n);return e}function r(n){var e=this.N(n);return e}function o(n){var e=this.N(n);return e}function i(){var n=this,e=n.r;if(!e){var t=n.f?n.f:S(n.b[0]),r=n.g;switch(n.d){case j:n.Q();break;case N:n.Z(t,r)?n.W(t,r,[T.G([n.key])]):null;break;case A:n.Z(t,r)?n.W(t,r,c.call(n)):null;break;case x:n.W(t,null,c.call(n));break;case E:return n.Z(t,r)?n.S(t,c.call(n)):null}}}function l(n,e,t){var r,o,i,l,a,c,u=D.B1===t?!0:!1;for(n.length>e.length?(r=e,o=n):(r=n,o=e),c=u?[]:[].concat(o),i=0,l=r.length;l>i;i+=1)a=r[i],o.indexOf(a)>-1?u&&c.push(a):u||c.push(a);return c.length?c:null}function a(n,e,t){var r,o,i,l,a,c,u=n[0].trim(),f=n[1].trim(),s=[];if(r=[t,u],!(o=T.P(r.join("."))))return null;for(i=0,c=o.length;c>i;i+=1){switch(l=f.localeCompare(o[i]),e){case 0:case 3:a=l>=0;break;case 1:case 2:a=0>=l;break;case 4:a=0==l;break;case 5:a=l>0;break;case 6:a=0>l}a?s.push(i+1):null}return s}function c(){var n,e,t,r,o,i,c,u,f,s=this,h=s.w,g=D.B3,b=g.length,v=[],R=s.key;if(h)for(n=h[0],e=h[1],t=0,f=n.length;f>t;t+=1){for(r=n[t],b=0,u=g.length;u>b&&(o=r.split(g[b]),!(i=o.length>1));b+=1);if(i){if(!(c=a(o,b,R)))break;v=v.length?l(v,c,e[t-1]):v.concat(c)}}else v=T.F([s.key]);return v}function u(n,e){var t,r,o,i,l,a,c,u=this,f=[];for(r=e.split(t=D.B1),(o=r.length)<2&&(r=e.split(t=D.B2)),i=0,l=r.length-1;l>i;i+=1)f.push(t);for(a=l;a>=0;a-=1)if(c=r[a],o>1&&(c=c.split(t=D.B2),(l=c.length)>1))for(r.splice.apply(r,[a,1].concat(c)),i=0,l-=1;l>i;i+=1)f.splice(a,0,t);return r.length!=f.length+1?u.r="":(u=u.D(u),u.w=[r,f]),u.N(n)}function f(n,e){var t,r,o,i=this,l=!i.r&&2==arguments.length,a=i.f;if(l&&(l=T.D(e,D.s)&&(i=i.D(i)))&&(a?i.f=[].concat(a):null,t=e.split(","),l=a?a.length==t.length:S(i.b[0]).length==t.length))for(r=0,o=t.length;o>r&&(l=t[r].length);r+=1);return l?i.g=t:(i.r="ERROR",window.console.log("ERROR")),i.N(n)}function s(n,e){var t,r,o,i,l,a=this,c=!a.r&&2==arguments.length;if(c&&(c=T.D(e,D.s)&&(a=a.D(a))))for(l=a.b[0],t="*"==e?S(l):e.split(","),r=0,o=t.length;o>r&&(i=t[r],c=i.length)&&(c=S(l).indexOf(i)>-1);r+=1);return c?a.f=t:(a.r="error",window.console.log("error")),a.N(n)}function h(n,e){var t,r,o,i,l,a,c,u,f=this,s=!f.r,h={};if(s&&(s=T.D(e,D.a)&&(f=f.D(f))))for(u=f.b,t=0,r=e.length;r>t&&(o=e[t],s=o.length);t+=1)if(i={isnull:!0},o instanceof Array)for(l=0,a=o.length;a>l;l+=1)c=o[l],0==l?h[c]=i:1==l?i.isnull=c:2==l?i.as=c:null;else h[o]=i;return s?u.push(h):(f.r="ERROR",window.console.log("ERROR")),f.N(n)}function g(n,e){var t=this,r=e?!0:!1;if(r){var o=".",i=e.split(o),l=t.d,a=i.length,c=a>1?i[0]:"default",u=i[a-1],f=t.C,s=T.D;if((r=s(c,D.s)&&s(u,D.s))&&(t=f(f(t,c),u),l=t.d,r=t&&l))switch(l){case j:break;case N:case E:case x:case A:r=t.R()}}return r||(t.r="ERROR",window.console.log("ERROR")),t.N(n)}function b(n){return C.C(w(n),"SJE.JRDB.DATABASES").N()}function v(){return b([j,[{table:g},{columns:h},[[{pk:t},{fk:r},{uk:o}],{commit:i}]]])}function R(){return b([N,[{into:g},[[{columns:s}],{values:f}],{commit:i}]])}function O(){return b([A,[{table:g},{columns:s},{values:f},[[{where:u}],{commit:i}]]])}function m(){return b([E,[{from:g},{columns:s},[[{where:u}],{commit:i}]]])}function p(){return b([x,[{from:g},[[{where:u}],{commit:i}]]])}function d(){e(this,{create:v,update:O,"delete":p,insert:R,select:m})}function w(n){return B(C,{d:{writable:!1,value:n[0]},e:{writable:!0,value:n[1]}})}function k(n){d.prototype={name:"jrdb container",version:"1.0.5"},n.jrdb||(n.jrdb=new d)}var y=n.Sje||(n.Sje={}),j=1,N=2,A=3,E=4,x=5,D={s:String,a:Array,A:"if",B:"not",C:"exists",B1:"AND",B2:"OR",B3:["<=",">=","=>","=<","=","<",">"],ERR:["Please enter the name of the table.","Please enter the columns.","The existence of the table.","The column does not exist.","The values do not match.","This value can not be null.","The table or column does not exist.","The conditional statement is not correct grammar."]},S=Object.keys,B=Object.create,P=[].slice,T={D:function(n,e){var t=n&&n.length;return n instanceof Object?n instanceof e&&t:typeof n===e.name.toLowerCase()&&t},A:n.localStorage,N:function(n){T.A.removeItem(n)},O:function(n,e){T.A.setItem(n,JSON.stringify(e))},P:function(n){var e=T.A.getItem(n);return JSON.parse(e)},E:function(n,e){T.O(n.concat("ROW","COUNT").join("."),e)},F:function(n){var e=T.P(n.concat("ROW","COUNT").join("."));return e?e:[]},G:function(n){var e=T.F(n),t=e.length;return t?e[t-1]+1:1},K:function(n){var e,t,r,o=[];for(e=0,r=n.length;r>e;e+=1)t=n[e],o[e]=t instanceof Array?T.K(t):t;return o}},C={get key(){var n=this,e=n.c,t=n.a;return e?(e.key?[e.key,t]:[t]).join("."):null},I:function(n){var e,t,r,o=n instanceof Array?n:[n],i=[];for(e=0,r=o.length;r>e;e+=1)t=o[e],i=i.concat(t);return i},J:function(n){var e,t,r,o,i,l,a,c=this,u=T.K(c.e),f=u[0];if(f instanceof Array)for(e=0,a=f.length;a>e;e+=1){if(t=f[e],t instanceof Array){for(r=0,l=t.length;l>r;r+=1)if(o=S(t[r]).indexOf(n)>-1){i=t.splice(r,1),t.length?null:f.splice(e,1);break}}else o=S(t).indexOf(n)>-1;if(o)break}return!i&&n&&u.splice(0,1),u},N:function(n){var e=this,t={},r=n?e.e=e.J(n):e.e,o=e.I(r[0]),i=o instanceof Array?o:[o];return i.forEach(function(n){var r=S(n)[0],o=[r];t[r]=function(){return n[r].apply(e,o.concat(P.call(arguments)))}}),t},F:function(n,e,t){return B(n,{a:{writable:!1,value:e},b:{writable:!1,value:t?t:[]},c:{writable:!1,value:n}})},D:function(n){var e,t,r,o=C.F(n.c,n.a,n.b),i=S(n);for(e=0,r=i.length;r>e;e+=1)t=i[e],o[t]=n[t];return o},C:function(n,e,t){return n.b?n.b.push(e):null,C.F(n,e,t)},Q:function(){for(var n=this,e=T.O;n&&n.a;)e(n.key,n.b),n=n.c},R:function(){for(var n=this,e=T.P,t=!1;n&&n.a;){var r=n.b,o=e(n.key);if(!(t=Boolean(o)))break;r.splice(0,r.length),r.push.apply(r,o),n=n.c}return t},Z:function(n,e){var t,r,o,i,l,a,c=this,u=c.b[0],f=S(u),s=n.length;if(i=n&&s)for(t=0,a=n.length;a>t&&(r=n[t],o=u[r],i=f.indexOf(r)>-1&&o,e&&!o.isnull&&i&&(l=e[t],i=l.indexOf(void 0)<0&&l.indexOf(null)<0),i);t+=1);return i||(c.r="ERROR",window.console.log("ERROR")),i},W:function(n,e,t){var r,o,i,l,a,c,u,f,s,h,g,b,v,R,O,m=this,p=S(m.b[0]);if(a=n&&t){for(r=[m.key],o=r.concat("ROW"),i=T.F(r),l=0,R=t.length;R>l;l+=1){for(a=t[l],c=o.concat(a).join("."),u=T.P(c)||[],f=0,O=n.length;O>f;f+=1)s=n[f],h=p.indexOf(s),g=r.concat(s).join("."),b=T.P(g)||[],u[h]=b[a-1]=e?e[f]:"",T.O(g,b);e?(T.O(c,u),i.indexOf(a)<0?i.push(a):i):(T.N(c),(v=i.indexOf(a))>-1?i.splice(v,1):i)}T.E(r,i)}},S:function(n,e){var t,r,o,i,l,a,c,u,f,s,h,g,b=this,v=S(b.b[0]);if(c=n&&e)for(t=[b.key,"ROW"],r=n.toString()!=v.toString(),o=0,h=e.length;h>o;o+=1){if(i=t.concat(e[o]).join("."),s=l=T.P(i))if(a?a:a=[],r)a.push(l);else{for(f=[],c=0,g=n.length;g>c&&(s=(u=v.indexOf(n[c]))>-1);c+=1)f.push(l[u]);if(!s)break;a.push(f)}if(!s)break}return s||(b.r="ERROR",window.console.log("ERROR"),a=null),a}};k(y)}(window,document);
